<html lang="ru">
    @@include('utilities/head.html')
    @@include('components/header.html')

    <section class="maps">
        <div class="container">
            <div class="h1-block">
                <h1 class="h1">Адреса наших магазинов в Санкт-Петербурге</h1>
                @@include('components/breadcrumbs.html')
            </div>
            <div class="maps-contacts">
                <div class="maps-contacts__info">
                    <div class="maps-contact-item is-active" onclick="moveToPoint(0, this)">
                        <h3 class="maps-contact-item__title">Центральный район, Итальянская ул., 15</h3>
                        <p class="maps-contact-item__text">Галерея бутикoв "Гранд Палас", вход с Итальянской улицы, правый лифт, 3 этаж</p>
                        <div class="maps-contact-item__schedule">
                            <span>График работы:</span>
                            <span>
                                <p>Ежедневно</p>
                                <p>11:00 - 21:00</p>
                            </span>
                        </div>
                        <p class="maps-contact-item__phone">Телефон: <a href="tel:+79218898529">+7 921 889 8529</a></p>
                    </div>

                    <div class="maps-contact-item" onclick="moveToPoint(1, this)">
                        <h3 class="maps-contact-item__title">Санкт-Петербург, Комендантский пр., 9, к2</h3>
                        <p class="maps-contact-item__text">ТК "Модный Променад", 1 этаж</p>
                        <div class="maps-contact-item__schedule">
                            <span>График работы:</span>
                            <span>
                                <p>Ежедневно</p>
                                <p>10:00 - 22:00</p>
                            </span>
                        </div>
                        <p class="maps-contact-item__phone">Телефон: <a href="tel:+79218898529">+7 921 889 8529</a></p>
                    </div>
                </div>
                <div id="yandex-map"></div>
            </div>
            <!-- ВСТАВИТЬ СВОЙ КЛЮЧ КАРТ -->
            <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=ВАШ_API_КЛЮЧ" type="text/javascript"></script>

            <script>
                let myMap;
                let placemarks = [];
                
                const locations = [
                    { coords: [59.936305, 30.333701], title: "Unico Moda: Итальянская 15" },
                    { coords: [60.004239, 30.263426], title: "Unico Moda: Комендантский 9" }
                ];
                ymaps.ready(init);

                function init() {
                    myMap = new ymaps.Map("yandex-map", {
                        center: locations[0].coords,
                        zoom: 15,
                        controls: ['zoomControl', 'fullscreenControl']
                    });

                    // Создаем и добавляем метки
                    locations.forEach((loc, index) => {
                        let pm = new ymaps.Placemark(loc.coords, {
                            balloonContent: loc.title
                        }, {
                            preset: 'islands#yellowDotIcon' // Желтый цвет в стиле Яндекса
                        });
                        
                        placemarks.push(pm);
                        myMap.geoObjects.add(pm);
                    });
                }
                function moveToPoint(index, element) {
                    const target = locations[index];
                    
                    // 1. Плавный перелет
                    myMap.panTo(target.coords, {
                        flying: true,
                        duration: 1000
                    }).then(() => {
                        // 2. Открываем балун (облачко) после прилета
                        placemarks[index].balloon.open();
                    });

                    // 3. Красим активный таб
                    document.querySelectorAll('.maps-contact-item').forEach(item => item.classList.remove('is-active'));
                    element.classList.add('is-active');
                }
            </script>
        </div>
    </section>

    @@include('components/footer.html')
    @@include('utilities/scripts.html')
</body>
</html>